<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‰∏ÉÂ§ïÁÉüËä±ÁßÄ</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: 'Arial', sans-serif;
    }

    canvas {
      display: block;
    }

    .message {
      position: absolute;
      color: #fff;
      text-align: center;
      z-index: 100;
      text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
      opacity: 0;
      transition: opacity 2s;
    }

    .message h1 {
      font-size: 3em;
      margin-bottom: 20px;
      color: #ff69b4;
    }

    .message p {
      font-size: 1.5em;
      color: #ffb6c1;
    }

    .music-control {
      position: absolute;
      bottom: 20px;
      right: 20px;
      z-index: 100;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      outline: none;
    }

    .music-control:hover {
      background: rgba(255, 105, 180, 0.7);
    }

    .music-info {
      position: absolute;
      bottom: 80px;
      right: 20px;
      color: white;
      background: rgba(0, 0, 0, 0.5);
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      max-width: 200px;
      text-align: center;
      display: none;
    }
  </style>
</head>

<body>
  <canvas id="fireworks"></canvas>
  <div class="message" id="message">
    <h1>‰∏ÉÂ§ïÂø´‰πê</h1>
    <p>ÊÑøÊúâÊÉÖ‰∫∫ÁªàÊàêÁú∑Â±û</p>
  </div>
  <button class="music-control" id="musicControl">üéµ</button>
  <div class="music-info" id="musicInfo">Ê£âËä±Á≥ñ - ÂÜçËßÅÁéãÂ≠ê</div>

  <script>
    const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        const message = document.getElementById('message');
        const musicControl = document.getElementById('musicControl');
        const musicInfo = document.getElementById('musicInfo');
        
        // ËÆæÁΩÆÁîªÂ∏ÉÂ§ßÂ∞è‰∏∫Á™óÂè£Â§ßÂ∞è
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // Á™óÂè£Â§ßÂ∞èÊîπÂèòÊó∂ÈáçÁΩÆÁîªÂ∏ÉÂ§ßÂ∞è
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // ÊòæÁ§∫Á•ùÁ¶èÊ∂àÊÅØ
        setTimeout(() => {
            message.style.opacity = '1';
        }, 2000);
        
        // Ê£âËä±Á≥ñ‰πêÂõ¢ÁöÑÈü≥‰πê
        const songs = [
        {
             title: "Áî∞È¶•ÁîÑ - Â∞èÂπ∏Ëøê",
                url: "https://music.163.com/song/media/outer/url?id=38592976.mp3"
            },
        ];
        
        // Èü≥‰πêÊí≠ÊîæÂô®
        const bgMusic = new Audio();
        let currentSongIndex = 0;
        let isMusicPlaying = false;
        
        // Âä†ËΩΩÈü≥‰πê
        function loadSong(index) {
            currentSongIndex = index % songs.length;
            bgMusic.src = songs[currentSongIndex].url;
            musicInfo.textContent = songs[currentSongIndex].title;
            musicInfo.style.display = 'block';
            setTimeout(() => {
                musicInfo.style.display = 'none';
            }, 3000);
            
            bgMusic.load();
        }
        
        // ÂàùÂßãÂåñÂä†ËΩΩÁ¨¨‰∏ÄÈ¶ñÊ≠å
        loadSong(0);
        bgMusic.loop = true;
        
        // Èü≥‰πêÊéßÂà∂ÊåâÈíÆ
        musicControl.addEventListener('click', () => {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicControl.textContent = 'üéµ';
            } else {
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                    musicControl.textContent = 'üîä';
                }).catch(e => {
                    // Â¶ÇÊûúÊí≠ÊîæÂ§±Ë¥•ÔºåÂ∞ùËØï‰∏ã‰∏ÄÈ¶ñ
                    loadSong(currentSongIndex + 1);
                    bgMusic.play();
                });
            }
            isMusicPlaying = !isMusicPlaying;
        });
        
        // ÁÇπÂáªÈ°µÈù¢‰ªªÊÑè‰ΩçÁΩÆÂ∞ùËØïÊí≠ÊîæÈü≥‰πê
        document.addEventListener('click', function firstInteraction() {
            if (!isMusicPlaying) {
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                    musicControl.textContent = 'üîä';
                }).catch(e => {
                    musicInfo.textContent = 'ÁÇπÂáªÊåâÈíÆÊí≠ÊîæÈü≥‰πê';
                    musicInfo.style.display = 'block';
                    setTimeout(() => {
                        musicInfo.style.display = 'none';
                    }, 3000);
                });
            }
            document.removeEventListener('click', firstInteraction);
        }, { once: true });
        
        // ÁÉüËä±Á≤íÂ≠êÁ±ª
        class Particle {
            constructor(x, y, color, velocity, size = 2, gravity = 0.2, friction = 0.98, glow = true) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = velocity;
                this.size = size;
                this.alpha = 1;
                this.gravity = gravity;
                this.friction = friction;
                this.glow = glow;
                this.life = Math.random() * 100 + 100;
            }
            
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                
                if (this.glow) {
                    ctx.shadowBlur = 15;
                    ctx.shadowColor = this.color;
                }
                
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
            
            update() {
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= 0.01;
                this.life--;
            }
        }
        
        // ÁÉüËä±Á±ª
        class Firework {
            constructor(x, y, targetX, targetY, color) {
                this.x = x;
                this.y = y;
                this.targetX = targetX;
                this.targetY = targetY;
                this.color = color;
                this.velocity = {
                    x: (targetX - x) / 100 * (Math.random() * 0.4 + 0.8),
                    y: (targetY - y) / 100 * (Math.random() * 0.4 + 0.8)
                };
                this.particles = [];
                this.size = 3;
                this.trail = [];
                this.maxTrail = 5;
            }
            
            draw() {
                ctx.save();
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 15;
                ctx.shadowColor = this.color;
                
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                
                // ÁªòÂà∂Â∞æËøπ
                for (let i = 0; i < this.trail.length; i++) {
                    const pos = this.trail[i];
                    ctx.globalAlpha = i / this.trail.length;
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, this.size * (i / this.trail.length), 0, Math.PI * 2);
                    ctx.fill();
                }
                
                ctx.restore();
            }
            
            update() {
                // Ê∑ªÂä†ÂΩìÂâç‰ΩçÁΩÆÂà∞Â∞æËøπ
                this.trail.push({
                    x: this.x,
                    y: this.y
                });
                
                // ÈôêÂà∂Â∞æËøπÈïøÂ∫¶
                if (this.trail.length > this.maxTrail) {
                    this.trail.shift();
                }
                
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                
                // Ê£ÄÊü•ÊòØÂê¶Âà∞ËææÁõÆÊ†á‰ΩçÁΩÆ
                const distance = Math.hypot(this.targetX - this.x, this.targetY - this.y);
                if (distance < 10) {
                    this.explode();
                    return true; // Ë°®Á§∫ÁÉüËä±Â∑≤ÁªèÁàÜÁÇ∏
                }
                
                return false;
            }
            
            explode() {
                // ÂàõÂª∫ÁàÜÁÇ∏Á≤íÂ≠ê
                const particleCount = 150 + Math.random() * 100;
                const angleIncrement = (Math.PI * 2) / particleCount;
                const power = 5 + Math.random() * 5;
                
                // ÂøÉÂΩ¢ÁÉüËä±
                const isHeart = Math.random() > 0.7;
                
                for (let i = 0; i < particleCount; i++) {
                    let velocity;
                    
                    if (isHeart && i % 2 === 0) {
                        // ÂøÉÂΩ¢Ë∑ØÂæÑ
                        const t = i / particleCount * Math.PI * 2;
                        const heartX = 16 * Math.pow(Math.sin(t), 3);
                        const heartY = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                        velocity = {
                            x: heartX * 0.1 * (Math.random() * 0.3 + 0.7),
                            y: heartY * 0.1 * (Math.random() * 0.3 + 0.7)
                        };
                    } else {
                        // ÊôÆÈÄöÂúÜÂΩ¢ÁàÜÁÇ∏
                        const angle = angleIncrement * i;
                        const randomPower = power * (Math.random() * 0.5 + 0.5);
                        velocity = {
                            x: Math.cos(angle) * randomPower,
                            y: Math.sin(angle) * randomPower
                        };
                    }
                    
                    // ÈöèÊú∫È¢úËâ≤ÂèòÂåñ
                    const hue = parseInt(this.color.slice(4)) + (Math.random() * 30 - 15);
                    const saturation = 100;
                    const lightness = 50 + Math.random() * 20;
                    const color = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                    
                    // ÈöèÊú∫Â§ßÂ∞è
                    const size = Math.random() * 3 + 1;
                    
                    this.particles.push(new Particle(
                        this.x,
                        this.y,
                        color,
                        velocity,
                        size,
                        0.1,
                        0.98,
                        true
                    ));
                }
                
                // Ê∑ªÂä†‰∏Ä‰∫õÈó™ÁÉÅÁöÑÂ∞èÊòüÊòü
                for (let i = 0; i < 20; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 3 + 1;
                    this.particles.push(new Particle(
                        this.x,
                        this.y,
                        '#ffffff',
                        {
                            x: Math.cos(angle) * speed,
                            y: Math.sin(angle) * speed
                        },
                        Math.random() * 1 + 0.5,
                        0.05,
                        0.9,
                        true
                    ));
                }
            }
        }
        
        // Â≠òÂÇ®ÊâÄÊúâÁÉüËä±
        let fireworks = [];
        let particles = [];
        
        // ÈöèÊú∫È¢úËâ≤
        function getRandomColor() {
            const hue = Math.floor(Math.random() * 360);
            return `hsl(${hue}, 100%, 50%)`;
        }
        
        // ÂàõÂª∫Êñ∞ÁÉüËä±
        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = canvas.height;
            const targetX = Math.random() * canvas.width;
            const targetY = Math.random() * canvas.height * 0.6;
            const color = getRandomColor();
            
            fireworks.push(new Firework(x, y, targetX, targetY, color));
        }
        
        // ÂàõÂª∫ÂàùÂßãÁÉüËä±
        for (let i = 0; i < 5; i++) {
            setTimeout(createFirework, i * 800);
        }
        
        // Âä®ÁîªÂæ™ÁéØ
        function animate() {
            // ÂçäÈÄèÊòéÈªëËâ≤ËÉåÊôØÔºåÂàõÂª∫ÊãñÂ∞æÊïàÊûú
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ÈöèÊú∫Ê∑ªÂä†Êñ∞ÁÉüËä±
            if (Math.random() < 0.03) {
                createFirework();
            }
            
            // Êõ¥Êñ∞ÂíåÁªòÂà∂ÁÉüËä±
            for (let i = fireworks.length - 1; i >= 0; i--) {
                const firework = fireworks[i];
                firework.draw();
                
                if (firework.update()) {
                    // ÁÉüËä±ÁàÜÁÇ∏ÂêéÔºåÂ∞ÜÂÖ∂Á≤íÂ≠êÊ∑ªÂä†Âà∞ÂÖ®Â±ÄÁ≤íÂ≠êÊï∞ÁªÑ
                    particles.push(...firework.particles);
                    fireworks.splice(i, 1);
                }
            }
            
            // Êõ¥Êñ∞ÂíåÁªòÂà∂Á≤íÂ≠ê
            for (let i = particles.length - 1; i >= 0; i--) {
                const particle = particles[i];
                particle.draw();
                particle.update();
                
                if (particle.alpha <= 0 || particle.life <= 0) {
                    particles.splice(i, 1);
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        // ÁÇπÂáªÂ±èÂπïÂàõÂª∫ÁÉüËä±
        canvas.addEventListener('click', (e) => {
            const x = Math.random() * canvas.width;
            const y = canvas.height;
            const targetX = e.clientX;
            const targetY = e.clientY;
            const color = getRandomColor();
            
            fireworks.push(new Firework(x, y, targetX, targetY, color));
        });
  </script>
</body>

</html>
